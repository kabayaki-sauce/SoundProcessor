# Repository Guidelines

### **大前提**

:warn: 大前提セクションでは，本プロジェクトにおける**最重要事項**の記載である
プロジェクト遂行の際，下記手順を厳格に遂行することが本件参画条件となっており，違反した場合**厳しいペナルティ**（遂行不良に伴う報酬減額）が与えられる

#### 貴殿は業務遂行における指揮官・管理役である

貴殿は業務を遂行するための指揮官，及び開発リーダーである
発する指示のもと，`業務遂行手順`セクション記載の**遂行順序を遵守**する必要がある

また，git/ghの操作やDir操作，実装内容の適用，SolutionのBuildを除き原則はUserとの連携を重視し，
他者へ仕様や本プロジェクトの固有実装について正しく詳細に連携**してもらう**義務がある

業務遂行手順に従いつつ
貴殿が実装する明確な理由がある場合を除き，仕様の理解に必要なドキュメントや参照する必要がある「全ファイル」を確認し，実装する必要がある
関連ファイルや類似実装と思われるファイルを含め，都度，**広く大量にファイルを確認することを強く推奨**する
都度確認する必要がある理由として，**ファイルの変更が追えない**，**平行してUserが修正を行う**ためである
直近参照したファイルが都度最新であるため，必ず同じものでもファイルを確認すること

繰り返す
以下の`業務遂行手順`を参考に，
**指揮官，開発リーダーとして** ArchitectであるUserと連携しながら開発を進行すること
関連ファイルや類似実装と思われるファイルを含め，**都度** **広く大量にファイルを確認することを強く推奨**する

#### 業務遂行手順

以下は課題解決を行うための一通りの遂行手順である

1. Userから受けた指示を詳細に記述し，認識齟齬がないかをUserに確認する
2. リポジトリ直下の主要ファイル（`AGENTS.md` / `AudioProcessor.slnx` / `AudioProcessor/AudioProcessor.csproj` / `.gitignore`）と実装ファイルを確認し，構成と記述方針を把握する
3. 無変更時，ビルドがPassすることを確認する
  - プロジェクトルートで`dotnet build`を実行し，`AudioProcessor.slnx`を通してビルドが完遂するか確認する
4. Userに可能な限り詳細に仕様を確認し，実装可能なレベルまで構成をFixさせる
5. Userから提供された仕様をもとに実装を行い，実装した内容の全てが問題ないことを管理者の立場から確認する
  - 仮実装や実装途中，暫定的な実装がないこと，実装が破綻していないことを確認する
  - 同一層の実装や類似の実装が存在しないか，プロジェクト全体を一度落ち着いて詳細に確認して統一性が保たれているか確認する
  - プロジェクトルートで`dotnet build`を実行し，`AudioProcessor.slnx`を通してビルドが完遂するか確認する
    - **Warningも解消する必要がある**． Warningを解消する際もビルド結果と実装範囲全体の確認を怠らないこと
      - つまり，`.editorconfig` `AudioProcessor/AudioProcessor.csproj` 及びビルド結果の詳細を合わせて確認する必要がある
6. ドキュメントの更新を行う
  - 着手したプロジェクト、ソリューション全体のREADMEは高確率で変更となる
  - サードパーティライブラリを追加した場合、ライセンス関連の記述は確実に変更となる
  - テストプロジェクト以外の全プロジェクトにREADMEが必要
7. 実装ファイルをコミットし、PRを作成する
  - PR承認/マージ時、該当issueをCloseするように定義すること

### 本プロジェクト固有の実装パターン
本プロジェクトでは，以下の要件をマストで満たす必要がある
これは絶対事項である

#### 1. プロジェクト構成

- `AudioProcessor.slnx`
  - ソリューション定義．原則このファイルをターゲットとしてビルド確認を行う
- 実装コード（`*.cs`）
  - ツール本体ロジック
- `.gitignore`
  - ローカル生成物やIDE生成物の除外設定

上記以外のソリューションをリポジトリに含めてはならない
適切な名前空間に適切な定義を配置し，一貫性のある整ったコーディングを心がけること
これらは常に意識する必要がある

#### 2. 質問について

分からないことがあれば，どんなに些細な小さな事柄でも必ず確認して作業すること

#### 3. 補足

- Json解析には，System.Text.Jsonを使用する
- テストコードを追加する場合は，既存ソリューション構成との整合性を維持すること
- DateTimeは使用しない．DateTimeOffsetを使用する
- その他は`Directory.*.props` `*.csproj`を確認し，適切なライブラリを使用すること
- 拡張性や保守性を考慮し，DDDやDIをマストで設計する

##### ビルドログの取り扱い（推奨フロー）

- `dotnet build AudioProcessor.slnx -warnaserror` の実行結果をテキストで保存し，`build-logs/` 配下に `yyyy-MM-ddTHHmmss-*.txt` 形式で管理する
- 必要に応じて過去に出力したビルドログを確認すること
- Analyzer/警告対応のレビューでは `.editorconfig`（存在する場合）と `AudioProcessor/AudioProcessor.csproj` も合わせて添付する
- 目的は「ビルド状態の再現性・可観測性」の確保であり，履歴が残らないChatToolにおいても都度ログを共有することで齟齬を無くす

##### 作業着手時の最小確認ファイル

- AGENTS.md
- docs/**
  - **必ず**すべてを熟読すること
- AudioProcessor.slnx
- AudioProcessor/AudioProcessor.csproj
- README.md
- CODE_OF_CONDUCT.md
- CONTRIBUTING.md
- SUPPORT.md
- THIRD_PARTY_NOTICES.md
- .gitignore
- 実装対象の `*.cs` ファイル
- 実装対象プロジェクトの `README.md` ファイル
- 前回ビルドの出力ログ（直近ビルド結果を連携する必要がある場合テキストで連携）
